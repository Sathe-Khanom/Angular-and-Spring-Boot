<div class="container mt-4">
  <h2>Jobs by Company</h2>

  <!-- Company Dropdown -->
  <div class="form-group mb-4">
    <label for="companySelect">Select Company:</label>
    <select 
      id="companySelect" 
      [(ngModel)]="selectedCompany" 
      (change)="onCompanyChange()" 
      class="form-control"
    >
      <option value="">-- Select Company --</option>
      <option *ngFor="let emp of employers" [value]="emp.companyName">
        {{ emp.companyName }}
      </option>
    </select>
  </div>

  <!-- Jobs Cards -->
  <div class="row" *ngIf="jobs.length > 0">
    <div class="col-md-4 mb-3" *ngFor="let job of jobs">
      <div class="card h-100 shadow-sm">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ job.title }}</h5>
          <p class="card-text text-truncate" [title]="job.description">{{ job.description }}</p>
          <p class="mb-1"><strong>Salary:</strong> {{ job.salary | currency }}</p>
          <p class="mb-1"><strong>Type:</strong> {{ job.jobType }}</p>
          <p class="mb-1"><strong>Posted:</strong> {{ job.postedDate | date:'mediumDate' }}</p>
          <p class="mb-1"><strong>Category:</strong> {{ job.categoryName }}</p>
          <p class="mb-1"><strong>Location:</strong> {{ job.locationName}}</p>
          <div class="mt-auto">
            <button class="btn btn-primary btn-sm w-100" (click)="applyJob(job.id, job.employerId!)">Apply</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- No Jobs Found -->
  <div *ngIf="jobs.length === 0 && selectedCompany" class="alert alert-info">
    No jobs found for "{{ selectedCompany }}"
  </div>
</div>
